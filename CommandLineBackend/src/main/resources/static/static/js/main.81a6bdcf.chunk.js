(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){},15:function(e,n,t){},16:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),s=t(7),_=t.n(s),i=(t(14),t(1)),c=t(2),l=t(4),r=t(3),u=t(5),d=(t(15),function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=Object(l.a)(this,(e=Object(r.a)(n)).call.apply(e,[this].concat(o)))).determineURL=function(){var e;return e="localhost"===window.location.hostname?8080:window.location.port,(window.location.protocol.includes("https")?"wss":"ws")+"://"+window.location.hostname+":"+e+"/webSocket"},t.initialize=function(){t.setState({connected:!1});var e=new WebSocket(t.determineURL());e.onopen=t.handleWsOnOpen,e.onmessage=t.handleWsOnMessage,e.onclose=t.handleWsOnClose,e.onerror=t.handleWsOnError,t.setState({webSocket:e})},t.handleWsOnOpen=function(e){console.log({function:"handleWsOnOpen",message:e}),t.setState({connected:!0}),t.props.onConnectedCallback()},t.handleWsOnMessage=function(e){var n=JSON.parse(e.data),a=n.message,o=n.commandStatus;"MESSAGE"===o?t.props.onMessageCallback(a):"FINAL"===o&&t.props.onFinalCallback(a)},t.handleWsOnClose=function(e){console.log({function:"handleWsOnClose",message:e}),t.props.onDisconnectedCallback(),t.setState({connected:!1}),setTimeout(t.initialize,1e3)},t.handleWsOnError=function(e){console.log({function:"handleWsOnError",message:e})},t.sendWsMessage=function(e){t.state.webSocket.send(e)},t}return Object(u.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){this.initialize()}},{key:"render",value:function(){return null}}]),n}(o.a.Component)),m=function(e){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(r.a)(n).apply(this,arguments))}return Object(u.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"input-line line"},o.a.createElement("div",{className:"prompt"},"[rapon@website] #"),o.a.createElement("div",{className:"cmdline-wrapper"},o.a.createElement("input",{className:"cmdline",readOnly:!0,value:this.props.command.commandArg}))),o.a.createElement("p",{className:"preformatted"},this.props.command.output))}}]),n}(o.a.Component),p=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=Object(l.a)(this,(e=Object(r.a)(n)).call.apply(e,[this].concat(o)))).state={releaseVersion:"vY",tsRelease:"0001-01-01T00:00:00Z"},t}return Object(u.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("version").then(function(e){if(e.ok)return e.json();throw new Error("Something went wrong")}).then(function(n){e.setState({releaseVersion:n.releaseVersion,tsRelease:n.tsRelease})}).catch(function(e){console.log("An error occured when retrieving the version.")})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("pre",null," ______ ______ ______ ______ ______ ______ ______ ______ ______ \n|______|______|______|______|______|______|______|______|______|\n______   _              ___                       ______        \n| ___ \\ (_)            / _ \\                      \\ \\ \\ \\ \n| |_/ /  _  ___ ___   / /_\\ \\  _ __   ___  _ __    \\ \\ \\ \\\n|    /  | |/ __/ _ \\  |  _  | | '_ \\ / _ \\| '_ \\    > > > > \n| |\\ \\  | | (_| (_) | | | | | | |_) | (_) | | | |  / / / /    \n\\_| \\_| |_|\\___\\___/  \\_| |_/ | .__/ \\___/|_| |_| /_/_/_/\n ______ ______ ______ ______ ______  \n|______|______|______|______|______| "+this.state.releaseVersion+" on "+this.state.tsRelease),o.a.createElement("br",null),o.a.createElement("pre",null,"If this is your first time here, typ 'help'!"))}}]),n}(o.a.Component),h=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=Object(l.a)(this,(e=Object(r.a)(n)).call.apply(e,[this].concat(o)))).state={commands:[],isMostRecentCommandFinished:!0,isConnectionEstablished:!1,inputValue:""},t.sendMessage=function(e,n){t.state.commands.push({commandArg:e,output:""}),t.setState({isMostRecentCommandFinished:!1,commands:t.state.commands}),t.myWebSocketComponent.sendWsMessage(JSON.stringify({commandArg:e,fileBase64:n})),t.setState({inputValue:""})},t.onMessage=function(e){t.setState(function(n){var t=n.commands,a=t[t.length-1];return a.output=a.output+e+"\n",{commands:t}})},t.onFinal=function(e){e&&t.onMessage(e),t.setState({isMostRecentCommandFinished:!0})},t.onConnected=function(){t.setState({isConnectionEstablished:!0})},t.onDisconnected=function(){t.setState({isConnectionEstablished:!1})},t.handleKeyDown=function(e){"Enter"===e.key&&(t.state.inputValue.startsWith("upload-plugin")?t.openFileUpload():t.sendMessage(t.state.inputValue,null))},t.openFileUpload=function(){t.myInput.click()},t.setUploadedFile=function(e){var n=new FileReader;n.readAsDataURL(e.target.files[0]),n.onload=function(){t.sendMessage(t.state.inputValue,n.result)},n.onerror=function(e){console.log("Error: ",e)}},t.setMyWebSocketComponent=function(e){t.myWebSocketComponent=e},t.setMyInput=function(e){t.myInput=e},t}return Object(u.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e,n=this;return e=this.state.isConnectionEstablished?this.state.isMostRecentCommandFinished?o.a.createElement("div",{id:"input-line",className:"input-line"},o.a.createElement("div",{className:"prompt"},"[rapon@website] #"),o.a.createElement("div",{className:"cmdline-wrapper"},o.a.createElement("input",{className:"cmdline",autoFocus:!0,onKeyDown:this.handleKeyDown,value:this.state.inputValue,onChange:function(e){return n.updateInputValue(e)}}))):o.a.createElement("div",{id:"input-line",className:"input-line"}):o.a.createElement("div",{id:"reconnect"},"No connection to the server. Trying to connect to the server..."),o.a.createElement("div",{id:"container"},o.a.createElement(d,{ref:this.setMyWebSocketComponent,onMessageCallback:this.onMessage,onFinalCallback:this.onFinal,onConnectedCallback:this.onConnected,onDisconnectedCallback:this.onDisconnected}),o.a.createElement("input",{id:"fileUploader",type:"file",ref:this.setMyInput,onChange:function(e){return n.setUploadedFile(e)},style:{display:"none"}}),o.a.createElement("output",null,o.a.createElement(p,null),o.a.createElement("br",null)),o.a.createElement("output",null,this.state.commands.map(function(e,n){return o.a.createElement(m,{key:n,command:e})})),e)}},{key:"updateInputValue",value:function(e){this.setState({inputValue:e.target.value})}}]),n}(o.a.Component);_.a.render(o.a.createElement(h,null),document.getElementById("root"))},8:function(e,n,t){e.exports=t(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.81a6bdcf.chunk.js.map