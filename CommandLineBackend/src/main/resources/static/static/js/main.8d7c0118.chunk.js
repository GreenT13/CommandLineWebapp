(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){},15:function(e,n,t){},16:function(e,n,t){"use strict";t.r(n);var a=t(0),_=t.n(a),o=t(7),s=t.n(o),c=(t(14),t(1)),i=t(2),r=t(4),l=t(3),u=t(5),m=(t(15),function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,_=new Array(a),o=0;o<a;o++)_[o]=arguments[o];return(t=Object(r.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(_)))).initialize=function(){var e=new WebSocket("ws://localhost:8080/webSocket");e.onopen=t.handleWsOnOpen,e.onmessage=t.handleWsOnMessage,e.onclose=t.handleWsOnClose,e.onerror=t.handleWsOnError,t.setState({webSocket:e})},t.handleWsOnOpen=function(e){t.setState({connected:!0}),t.props.onConnectedCallback()},t.handleWsOnMessage=function(e){var n=JSON.parse(e.data),a=n.message,_=n.commandStatus;t.props.onMessageCallback(a),"FINAL"===_&&t.props.onFinalCallback()},t.handleWsOnClose=function(e){t.props.onDisconnectedCallback(),t.setState({connected:!1}),setTimeout(t.initialize,1e3)},t.handleWsOnError=function(e){console.log("Error happened."),console.log(e)},t.sendWsMessage=function(e){t.state.webSocket.send(e)},t}return Object(u.a)(n,e),Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({connected:!1}),this.initialize()}},{key:"render",value:function(){return null}}]),n}(_.a.Component)),d=function(e){function n(){return Object(c.a)(this,n),Object(r.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(u.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){return _.a.createElement("div",null,_.a.createElement("div",{className:"input-line line"},_.a.createElement("div",{className:"prompt"},"[rapon@website] #"),_.a.createElement("div",null,_.a.createElement("input",{className:"cmdline",readOnly:!0,value:this.props.command.commandArg}))),_.a.createElement("p",{className:"preformatted"},this.props.command.output))}}]),n}(_.a.Component),p=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,_=new Array(a),o=0;o<a;o++)_[o]=arguments[o];return(t=Object(r.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(_)))).state={releaseVersion:"vY",tsRelease:"0001-01-01T00:00:00Z"},t}return Object(u.a)(n,e),Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("version").then(function(e){if(e.ok)return e.json();throw new Error("Something went wrong")}).then(function(n){e.setState({releaseVersion:n.releaseVersion,tsRelease:n.tsRelease})}).catch(function(e){console.log("An error occured when retrieving the version.")})}},{key:"render",value:function(){return _.a.createElement("pre",null," ______ ______ ______ ______ ______ ______ ______ ______ ______ \n|______|______|______|______|______|______|______|______|______|\n______   _              ___                       ______        \n| ___ \\ (_)            / _ \\                      \\ \\ \\ \\ \n| |_/ /  _  ___ ___   / /_\\ \\  _ __   ___  _ __    \\ \\ \\ \\\n|    /  | |/ __/ _ \\  |  _  | | '_ \\ / _ \\| '_ \\    > > > > \n| |\\ \\  | | (_| (_) | | | | | | |_) | (_) | | | |  / / / /    \n\\_| \\_| |_|\\___\\___/  \\_| |_/ | .__/ \\___/|_| |_| /_/_/_/\n ______ ______ ______ ______ ______  \n|______|______|______|______|______| "+this.state.releaseVersion+" on "+this.state.tsRelease)}}]),n}(_.a.Component),h=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,_=new Array(a),o=0;o<a;o++)_[o]=arguments[o];return(t=Object(r.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(_)))).state={commands:[],isMostRecentCommandFinished:!0,isConnectionEstablished:!1,inputValue:""},t.sendMessage=function(e){t.state.commands.push({commandArg:e,output:""}),t.setState({isMostRecentCommandFinished:!1,commands:t.state.commands}),t.myWebSocketComponent.sendWsMessage(JSON.stringify({commandArg:e}))},t.onMessage=function(e){t.setState(function(n){var t=n.commands,a=t[t.length-1];return a.output=a.output+e+"\n",{commands:t}})},t.onFinal=function(){t.setState({isMostRecentCommandFinished:!0})},t.onConnected=function(){t.setState({isConnectionEstablished:!0})},t.onDisconnected=function(){t.setState({isConnectionEstablished:!1})},t.handleKeyDown=function(e){"Enter"===e.key&&(t.sendMessage(t.state.inputValue),t.setState({inputValue:""}))},t.setMyWebSocketComponent=function(e){t.myWebSocketComponent=e},t}return Object(u.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e,n=this;return e=this.state.isConnectionEstablished?this.state.isMostRecentCommandFinished?_.a.createElement("div",{id:"input-line",className:"input-line"},_.a.createElement("div",{className:"prompt"},"[rapon@website] #"),_.a.createElement("div",{className:"cmdline-wrapper"},_.a.createElement("input",{className:"cmdline",autoFocus:!0,onKeyDown:this.handleKeyDown,value:this.state.inputValue,onChange:function(e){return n.updateInputValue(e)}}))):_.a.createElement("div",{id:"input-line",className:"input-line"}):_.a.createElement("div",{id:"reconnect"},"No connection to the server. Trying to connect to the server..."),_.a.createElement("div",{id:"container"},_.a.createElement(m,{ref:this.setMyWebSocketComponent,onMessageCallback:this.onMessage,onFinalCallback:this.onFinal,onConnectedCallback:this.onConnected,onDisconnectedCallback:this.onDisconnected}),_.a.createElement("output",null,_.a.createElement(p,null),_.a.createElement("br",null)),_.a.createElement("output",null,this.state.commands.map(function(e,n){return _.a.createElement(d,{key:n,command:e})})),e)}},{key:"updateInputValue",value:function(e){this.setState({inputValue:e.target.value})}}]),n}(_.a.Component);s.a.render(_.a.createElement(h,null),document.getElementById("root"))},8:function(e,n,t){e.exports=t(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.8d7c0118.chunk.js.map